<!DOCTYPE html>
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
<div style="position:fixed; margin-top:-30px; height:100%; width:100%; z-index:-2; background-image:url('front_end/images/page-home-1.jpg');"></div>
<div class="container-fluid media-slides">
  <div class="video_overlay">
  <p style="margin-top:10px;">
    Touch the screen to explore more!
  </p>
  </div>
  <video id="myVideo" loop autoplay muted>
     <source  src="front_end/assets/video/video2.mp4" type="video/mp4">
     Your browser does not support the video tag.
   </video>
</div>


<body>


<div class="parent_layout">

<div class="buildyourmack_iframe container">
  <a class="" href="#"  id=""style="position:fixed;  z-index:3; width:50px; margin:20px; height:50px;"><img style="margin-left:-130px;" class="back_button" border="0" alt="W3Schools" src="front_end/images/left-arrow (1).png" width="100" height="100"></a>
  <iframe class="" width="100%" height="1080px" src="https://build.macktrucks.com/"></iframe>
</div>

<div style="margin-top:30px;" class="container category_browser">

  <div class="bottom_indicator" style="position:fixed; z-index:3;  position: fixed; bottom: 1.6em; left:90%; width: 100%;"><img class="back_button" border="0" alt="W3Schools" src="front_end/images/bottom-arrow.png" width="100" height="100"></div>

  <img style="display: block;margin-left: auto;margin-right: auto;width: 40%;" src="front_end/images/Vision Truck Group Marketing - Logo Png.png" alt="Avatar">

  <div id="categories" class="row">
    <div class="col-xs-6 col-sm-4">
      <div class="card build_your_mack" style="">

        <img style="display: block;margin-left: auto;margin-right: auto;  height:60%;" class="card-img-top" src="front_end/images/buildyoumack.PNG" alt="Card image cap">
        <div style="margin:30px;"class="card-block">
          <h1 style="text-align: center;"class="card-title">Customize Your Mack</h1>
        </div>
      </div>
    </div>
  </div>
</div>

<a class="product_browser " href="#"  id="link"style="position:fixed; z-index:3; width:50px; margin:20px; height:50px;"><img class="back_button" border="0" alt="W3Schools" src="front_end/images/left-arrow (1).png" width="100" height="100"></a>

<div style="margin-top:30px;" class="container product_browser">
  <div class="bottom_indicator" style="position:fixed; z-index:3;  position: fixed; bottom: 1.6em; left:90%; width: 100%;"><img class="back_button" border="0" alt="W3Schools" src="front_end/images/bottom-arrow.png" width="100" height="100"></div>

  <img style="display: block; margin-left: auto; margin-right: auto;width: 40%;" src="front_end/images/Vision Truck Group Marketing - Logo Png.png" alt="Avatar">

  <div id="products" class="row">

  </div>
</div>



</div>
     <div style="height: 100px; clear: both;"></div>
</body>
<!-- JavaScripts-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<!-- Plugins-->

<script type="text/javascript">

var ip='localhost';
var selected_category='Null';
var selected_product='Null';

$(document).ready(function () {



});

var getUrlParameter = function getUrlParameter(sParam) {
    var sPageURL = decodeURIComponent(window.location.search.substring(1)),
        sURLVariables = sPageURL.split('&'),
        sParameterName,
        i;

    for (i = 0; i < sURLVariables.length; i++) {
        sParameterName = sURLVariables[i].split('=');

        if (sParameterName[0] === sParam) {
            return sParameterName[1] === undefined ? true : sParameterName[1];
        }
    }
};

var loadCategoriesAfterMedia =function loadCategoriesAfterMedia() {

  var xmlhttp = new XMLHttpRequest();
  xmlhttp.onreadystatechange = function() {
      if (this.readyState == 4 && this.status == 200) {
          var myObj = JSON.parse(this.responseText);
          for(var i=0;i<myObj.length;i++)
          {
        //      console.log(myObj[i].image_path)
              $("#categories").append('<div class="col-xs-6 col-sm-4 child_products"><div class="card cat_button" data-id="'+myObj[i].category_name+'" style=""><img style="display: block;margin-left: auto;margin-right: auto;  height:60%;" class="card-img-top" src="./uploads/'+myObj[i].image_path+'" alt="Card image cap"><div style="margin:30px;"class="card-block"> <h1 style="text-align: center;"class="card-title">'+myObj[i].category_name+'</h4></div></div></div>');

              //console.log(selected_category);
          }
      }
  };
  xmlhttp.open("GET", "fetchs/fetch_categories", true);
  xmlhttp.send();

}

$(document).ready(function () {

  //  var products[];
  //  txt1 = '<div class="col-xs-6 col-sm-4"><div class="card" style="width: 20rem;"><img class="card-img-top" src="assets/img/truck_engine.jpg" alt="Card image cap"><div style="margin:30px;"class="card-block">        <h4 class="card-title">Product 1</h4><p class="card-text">Some quick example text to build on the card title and make up the bulk of the cards content.</p><a href="#" class="btn btn-primary">Browse</a></div></div></div>';
//    $("#products").append(txt1);




});



/////////////////////////////////////////////////////////////////////////
$(document).ready(function () {

  var categorie_id = getUrlParameter('id');
  var back = getUrlParameter('back');
  console.log(back);
if(back!=1){
  $(".media-slides").show();
  $(".category_browser").hide();
  $(".buildyourmack_iframe").hide();
  $(".product_browser").hide();
}else if(back==1){
  $(".media-slides").hide();
  $(".category_browser").hide();
  $(".buildyourmack_iframe").hide();
  $(".product_browser").show();
  var xmlhttp = new XMLHttpRequest();
  xmlhttp.onreadystatechange = function() {
      if (this.readyState == 4 && this.status == 200) {
          var myObj = JSON.parse(this.responseText);
        //  selected_category=myObj[i].category_name;
          //console.log(selected_category);
  $(".child_products").remove();
  console.log("product is:"+categorie_id);

          for(var i=0;i<myObj.length;i++)
          {

            if(myObj[i].categorie==categorie_id)
            {

                $("#products").append('<div class="col-xs-6 col-sm-4 child_products"><div class="card prod_button" data-id="'+myObj[i].id+'" style="width: 20rem;"><img style="display: block;margin-left: auto;margin-right: auto;height:60%;" class="card-img-top" src="./uploads/'+myObj[i].image_path+'" alt="Card image cap"><div style="margin:30px;"class="card-block"> <h1 style="text-align: center;"class="card-title">'+myObj[i].product_name+'</h4></div></div></div>');
            }

          }

      }
  };
  xmlhttp.open("GET", "fetchs/fetch_products", true);
  xmlhttp.send();
}

});


///////after clicking the media slides for first time////////////
$(".media-slides").click(function () {
    $(".media-slides").hide();
    $(".buildyourmack_iframe").hide('bounceInUp animated');
    $(".parent_layout").show('bounceInUp animated');
    $(".category_browser").show('bounceInUp animated');
      loadCategoriesAfterMedia();
});


//////////////////////////clicking category button////////////////////////////////////////////
$(document).on("click", ".cat_button", function(){

console.log($(this).data("id"));
selected_category=$(this).data("id");
  $(".category_browser").hide('bounceInUp animated');
  $(".product_browser").show('bounceInUp animated');
  var xmlhttp = new XMLHttpRequest();
  xmlhttp.onreadystatechange = function() {
      if (this.readyState == 4 && this.status == 200) {
          var myObj = JSON.parse(this.responseText);
        //  selected_category=myObj[i].category_name;
          //console.log(selected_category);
          $(".child_products").remove();
          for(var i=0;i<myObj.length;i++)
          {

            if(myObj[i].categorie==selected_category)
            {
              console.log("selected category is:"+myObj[i].categorie);
              console.log("selected user category is:"+selected_category);

            //  $("#products").append('<div class="col-xs-6 col-sm-4 child_products"><div class="card" style="width: 20rem;"><img class="card-img-top" src="assets/img/truck_engine.jpg" alt="Card image cap"><div style="margin:30px;"class="card-block">        <h4 class="card-title">'+myObj[i].product_name+'</h4><p class="card-text">'+myObj[i].description+'</p><a href="product.html?id='+myObj[i].id+'" data-id="" class="btn btn-primary prod_button">See More</a></div></div></div>');
        //      $("#products").append('<div class="col-xs-6 col-sm-4 child_products"><div class="card" style="margin-top:30px; width: 20rem;"><img style="display: block;margin-left: auto;margin-right: auto;max-width:30%; margin-top:20px;" class="card-img-top" src="images/icon-brake.png" alt="Card image cap"><div style="margin:30px;"class="card-block">        <h4 style="text-align: center;"class="card-title">'+myObj[i].product_name+'</h4><p style="text-align: center;" class="card-text">'+myObj[i].description+'</p><a href="product.html?id='+myObj[i].id+'" data-id="" style="display: block;margin-left: auto;margin-right: auto;max-width:30%; text-align: center; color:#12253A;" class="cat_button">Check Gallery</a></div></div></div>');
              $("#products").append('<div class="col-xs-6 col-sm-4 child_products"><div class="card prod_button" data-id="'+myObj[i].id+'" style="width: 20rem;"><img style="display: block;margin-left: auto;margin-right: auto;height:60%;" class="card-img-top" src="./uploads/'+myObj[i].image_path+'" alt="Card image cap"><div style="margin:30px;"class="card-block"> <h1 style="text-align: center;"class="card-title">'+myObj[i].product_name+'</h4></div></div></div>');

            }

          }

      }
  };
  xmlhttp.open("GET", "fetchs/fetch_products/"+selected_category, true);
  xmlhttp.send();
});
//////////////////////////clicking build your mack////////////////////////////////////////////
$(document).on("click", ".build_your_mack", function(){

  $(".category_browser").hide('bounceInUp animated');
  $(".buildyourmack_iframe").show('bounceInUp animated');


          $(".child_products").remove();

});

//////////////////////////clicking back button////////////////////////////////////////////
$(document).on("click", ".back_button", function(){

console.log("clicked on Back button");

$(".product_browser").hide('bounceInUp animated');
$(".buildyourmack_iframe").hide('bounceInUp animated');
  $(".media-slides").hide();
  $(".category_browser").show('bounceInUp animated');

      var xmlhttp = new XMLHttpRequest();
      xmlhttp.onreadystatechange = function() {
          if (this.readyState == 4 && this.status == 200) {
              var myObj = JSON.parse(this.responseText);
                $(".child_products").remove();
              for(var i=0;i<myObj.length;i++)
              {
                $("#categories").append('<div class="col-xs-6 col-sm-4 child_products"><div class="card cat_button" data-id="'+myObj[i].category_name+'" style=""><img style="display: block;margin-left: auto;margin-right: auto;height:60%;" class="card-img-top" src="./uploads/'+myObj[i].image_path+'" alt="Card image cap"><div style="margin:30px;"class="card-block"> <h1 style="text-align: center;"class="card-title">'+myObj[i].category_name+'</h4></div></div></div>');

                  //console.log(selected_category);
              }
          }
      };
      xmlhttp.open("GET", "fetchs/fetch_categories", true);
      xmlhttp.send();
  });
///////////////////////////////////////////////////////clicking for product details/////////////////////



$(document).on("click", ".prod_button", function(){
  var id = $(this).attr("data-id");
  window.location='ProductGallery?id='+id;

});

///////////////////////////////////////////////////////parent layout/////////////////////
$(".parent_layout").click(function () {
clearTimeout(myVar);
myVar = setTimeout(function() {
  $(".media-slides").show();
  $(".parent_layout").hide('bounceInUp animated');
  $(".product_browser").hide('bounceInUp animated');
  $(".buildyourmack_iframe").hide('bounceInUp animated');
  $(".child_products").remove();
  $(".product_description_name").remove();

}, 300000);
});


var myVar;

  $(".media-slides").click(function () {
    myVar = setTimeout(function() {
      $(".media-slides").show();
      $(".parent_layout").hide('bounceInUp animated');
      $(".product_browser").hide('bounceInUp animated');
      $(".buildyourmack_iframe").hide('bounceInUp animated');

        $(".child_products").remove();
        $(".product_description_name").remove();

      }, 300000);
  });

  $(window).scroll(function() {
     if($(window).scrollTop() + $(window).height() == $(document).height()) {
      $(".bottom_indicator").hide();
    }else{
        $(".bottom_indicator").show();
    }
  });

  $(".bottom_indicator").click(function () {
    $("html, body").animate({ scrollTop: $(document).height() }, "slow");
  });


</script>

<style>
#myVideo {
    position: fixed;
    right: 0;
    bottom: 0;
    min-width: 100%;
    min-height: 100%;
}

#overlay {
    position: fixed; /* Sit on top of the page content */
    display: none; /* Hidden by default */
    width: 100%; /* Full width (cover the whole page) */
    height: 100%; /* Full height (cover the whole page) */
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0,0,0,0.5); /* Black background with opacity */
    z-index: 2; /* Specify a stack order in case you're using a different order for other*/
}

div.card {
  box-shadow: 0 16px 18px 0 rgba(0, 0, 0, 0.2), 0 30px 50px 0 rgba(0, 0, 0, 0.19);
  margin-top: 1em;
  height: 333px;
  width: 90%;
}

.video_overlay{
  position:fixed;
  z-index:5;
   left:0;
   top:0;
  margin:0px;
  width:100%; height:10%;
  background:   linear-gradient(to top, rgba(0,0,0,0), rgba(0,0,0,.8));

  text-align: center;
  color:white;

}




/* width
::-webkit-scrollbar {
  width: 32px;
	background-color: #F5F5F5;
  margin-right: 1.5em;

}

::-webkit-scrollbar-track {
  -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3);
	border-radius: 10px;
	background-color: #F5F5F5;
}

::-webkit-scrollbar-thumb {
  border-radius: 10px;
	-webkit-box-shadow: inset 0 0 6px rgba(0,0,0,.3);
	background-color: #D62929;
}

::-webkit-scrollbar-thumb:hover {
  border-radius: 20px;
	-webkit-box-shadow: inset 0 0 6px rgba(0,0,0,.3);
	background-color: #D62939;
}*/
</style>
